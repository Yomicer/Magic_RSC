const SlimefunOrigin = [
            "ADVANCED_CIRCUIT_BOARD",
            "ADVANCED_INDUSTRIAL_MINER",
            "ALUMINUM_BRASS_INGOT",
            "ALUMINUM_BRONZE_INGOT",
            "ALUMINUM_DUST",
            "ALUMINUM_INGOT",
            "ANCIENT_ALTAR",
            "ANCIENT_PEDESTAL",
            "ANCIENT_RUNE_AIR",
            "ANCIENT_RUNE_EARTH",
            "ANCIENT_RUNE_ENCHANTMENT",
            "ANCIENT_RUNE_ENDER",
            "ANCIENT_RUNE_FIRE",
            "ANCIENT_RUNE_LIGHTNING",
            "ANCIENT_RUNE_RAINBOW",
            "ANCIENT_RUNE_SOULBOUND",
            "ANCIENT_RUNE_VILLAGERS",
            "ANCIENT_RUNE_WATER",
            "ANDROID_INTERFACE_FUEL",
            "ANDROID_INTERFACE_ITEMS",
            "ANDROID_MEMORY_CORE",
            "ANGEL_TALISMAN",
            "ANIMAL_GROWTH_ACCELERATOR",
            "ANVIL_TALISMAN",
            "APPLE_JUICE",
            "ARMORED_JETBOOTS",
            "ARMORED_JETPACK",
            "ARMOR_AUTO_CRAFTER",
            "ARMOR_FORGE",
            "AUTOMATED_PANNING_MACHINE",
            "AUTO_ANVIL",
            "AUTO_ANVIL_2",
            "AUTO_BREEDER",
            "AUTO_BREWER",
            "AUTO_DISENCHANTER",
            "AUTO_DISENCHANTER_2",
            "AUTO_DRIER",
            "AUTO_ENCHANTER",
            "AUTO_ENCHANTER_2",
            "BANDAGE",
            "BASIC_CIRCUIT_BOARD",
            "BATTERY",
            "BEEF_JERKY",
            "BEE_BOOTS",
            "BEE_HELMET",
            "BEE_LEGGINGS",
            "BEE_WINGS",
            "BIG_CAPACITOR",
            "BILLON_INGOT",
            "BILLON_JETBOOTS",
            "BILLON_JETPACK",
            "BILLON_MULTI_TOOL",
            "BIO_REACTOR",
            "BIRTHDAY_CAKE",
            "BLADE_OF_VAMPIRES",
            "BLANK_RUNE",
            "BLISTERING_INGOT",
            "BLISTERING_INGOT_2",
            "BLISTERING_INGOT_3",
            "BLOCK_PLACER",
            "BOOK_BINDER",
            "BOOSTED_URANIUM",
            "BOOTS_OF_THE_STOMPER",
            "BOUND_BACKPACK",
            "BRASS_INGOT",
            "BROKEN_SPAWNER",
            "BRONZE_INGOT",
            "BUCKET_OF_FUEL",
            "BUCKET_OF_OIL",
            "BUTTER",
            "CACTUS_BOOTS",
            "CACTUS_CHESTPLATE",
            "CACTUS_HELMET",
            "CACTUS_LEGGINGS",
            "CAN",
            "CARBON",
            "CARBONADO",
            "CARBONADO_EDGED_CAPACITOR",
            "CARBONADO_EDGED_FURNACE",
            "CARBONADO_JETBOOTS",
            "CARBONADO_JETPACK",
            "CARBONADO_MULTI_TOOL",
            "CARBON_CHUNK",
            "CARBON_PRESS",
            "CARBON_PRESS_2",
            "CARBON_PRESS_3",
            "CARGO_MANAGER",
            "CARGO_MOTOR",
            "CARGO_NODE",
            "CARGO_NODE_INPUT",
            "CARGO_NODE_OUTPUT",
            "CARGO_NODE_OUTPUT_ADVANCED",
            "CARROT_JUICE",
            "CARROT_PIE",
            "CAVEMAN_TALISMAN",
            "CHAIN",
            "CHAIN_BOOTS",
            "CHAIN_CHESTPLATE",
            "CHAIN_HELMET",
            "CHAIN_LEGGINGS",
            "CHARGING_BENCH",
            "CHEESE",
            "CHICKEN_JERKY",
            "CHRISTMAS_APPLE_CIDER",
            "CHRISTMAS_APPLE_PIE",
            "CHRISTMAS_CAKE",
            "CHRISTMAS_CARAMEL",
            "CHRISTMAS_CARAMEL_APPLE",
            "CHRISTMAS_CHOCOLATE_APPLE",
            "CHRISTMAS_CHOCOLATE_MILK",
            "CHRISTMAS_COOKIE",
            "CHRISTMAS_EGG_NOG",
            "CHRISTMAS_FRUIT_CAKE",
            "CHRISTMAS_HOT_CHOCOLATE",
            "CHRISTMAS_MILK",
            "CHRISTMAS_PRESENT",
            "CLIMBING_PICK",
            "CLOTH",
            "COAL_GENERATOR",
            "COAL_GENERATOR_2",
            "COBALT_INGOT",
            "COBALT_PICKAXE",
            "COMBUSTION_REACTOR",
            "COMMON_TALISMAN",
            "COMPOSTER",
            "COMPRESSED_CARBON",
            "COMPRESSOR",
            "COOLER",
            "COOLING_UNIT",
            "COPPER_DUST",
            "COPPER_INGOT",
            "COPPER_WIRE",
            "CORINTHIAN_BRONZE_INGOT",
            "CRAFTER_SMART_PORT",
            "CRAFTING_MOTOR",
            "CROP_GROWTH_ACCELERATOR",
            "CROP_GROWTH_ACCELERATOR_2",
            "CRUCIBLE",
            "CRUSHED_ORE",
            "DAMASCUS_STEEL_BOOTS",
            "DAMASCUS_STEEL_CHESTPLATE",
            "DAMASCUS_STEEL_HELMET",
            "DAMASCUS_STEEL_INGOT",
            "DAMASCUS_STEEL_JETBOOTS",
            "DAMASCUS_STEEL_JETPACK",
            "DAMASCUS_STEEL_LEGGINGS",
            "DAMASCUS_STEEL_MULTI_TOOL",
            "DIET_COOKIE",
            "DUCT_TAPE",
            "DURALUMIN_INGOT",
            "DURALUMIN_JETBOOTS",
            "DURALUMIN_JETPACK",
            "DURALUMIN_MULTI_TOOL",
            "EASTER_APPLE_PIE",
            "EASTER_EGG",
            "ELECTRIC_DUST_WASHER",
            "ELECTRIC_DUST_WASHER_2",
            "ELECTRIC_DUST_WASHER_3",
            "ELECTRIC_FURNACE",
            "ELECTRIC_FURNACE_2",
            "ELECTRIC_FURNACE_3",
            "ELECTRIC_GOLD_PAN",
            "ELECTRIC_GOLD_PAN_2",
            "ELECTRIC_GOLD_PAN_3",
            "ELECTRIC_INGOT_FACTORY",
            "ELECTRIC_INGOT_FACTORY_2",
            "ELECTRIC_INGOT_FACTORY_3",
            "ELECTRIC_INGOT_PULVERIZER",
            "ELECTRIC_MOTOR",
            "ELECTRIC_ORE_GRINDER",
            "ELECTRIC_ORE_GRINDER_2",
            "ELECTRIC_ORE_GRINDER_3",
            "ELECTRIC_PRESS",
            "ELECTRIC_PRESS_2",
            "ELECTRIC_SMELTERY",
            "ELECTRIC_SMELTERY_2",
            "ELECTRIFIED_CRUCIBLE",
            "ELECTRIFIED_CRUCIBLE_2",
            "ELECTRIFIED_CRUCIBLE_3",
            "ELECTRO_MAGNET",
            "ELEVATOR_PLATE",
            "ELYTRA",
            "ELYTRA_CAP",
            "ELYTRA_SCALE",
            "ENCHANTED_GOLDEN_APPLE",
            "ENDER_ANGEL_TALISMAN",
            "ENDER_ANVIL_TALISMAN",
            "ENDER_BACKPACK",
            "ENDER_BOOTS",
            "ENDER_CAVEMAN_TALISMAN",
            "ENDER_CHESTPLATE",
            "ENDER_FARMER_TALISMAN",
            "ENDER_FIRE_TALISMAN",
            "ENDER_HELMET",
            "ENDER_HUNTER_TALISMAN",
            "ENDER_KNIGHT_TALISMAN",
            "ENDER_LAVA_TALISMAN",
            "ENDER_LEGGINGS",
            "ENDER_LUMP_1",
            "ENDER_LUMP_2",
            "ENDER_LUMP_3",
            "ENDER_MAGICIAN_TALISMAN",
            "ENDER_MINER_TALISMAN",
            "ENDER_TRAVELLER_TALISMAN",
            "ENDER_WARRIOR_TALISMAN",
            "ENDER_WATER_TALISMAN",
            "ENDER_WHIRLWIND_TALISMAN",
            "ENDER_WISE_TALISMAN",
            "ENDER_WIZARD_TALISMAN",
            "ENERGIZED_CAPACITOR",
            "ENERGY_CONNECTOR",
            "ENERGY_REGULATOR",
            "ENHANCED_AUTO_CRAFTER",
            "ENHANCED_CRAFTING_TABLE",
            "ENHANCED_FURNACE",
            "ENHANCED_FURNACE_10",
            "ENHANCED_FURNACE_11",
            "ENHANCED_FURNACE_2",
            "ENHANCED_FURNACE_3",
            "ENHANCED_FURNACE_4",
            "ENHANCED_FURNACE_5",
            "ENHANCED_FURNACE_6",
            "ENHANCED_FURNACE_7",
            "ENHANCED_FURNACE_8",
            "ENHANCED_FURNACE_9",
            "ENRICHED_NETHER_ICE",
            "ESSENCE_OF_AFTERLIFE",
            "EXPLOSIVE_BOW",
            "EXPLOSIVE_PICKAXE",
            "EXPLOSIVE_SHOVEL",
            "FARMER_SHOES",
            "FARMER_TALISMAN",
            "FERROSILICON",
            "FERTILIZER_APPLE",
            "FERTILIZER_BEETROOT",
            "FERTILIZER_CARROT",
            "FERTILIZER_COCOA",
            "FERTILIZER_KELP",
            "FERTILIZER_MELON",
            "FERTILIZER_POTATO",
            "FERTILIZER_SEAGRASS",
            "FERTILIZER_SEEDS",
            "FERTILIZER_SWEET_BERRIES",
            "FERTILIZER_WHEAT",
            "FILLED_FLASK_OF_KNOWLEDGE",
            "FIRE_TALISMAN",
            "FISH_JERKY",
            "FLASK_OF_KNOWLEDGE",
            "FLUID_PUMP",
            "FOOD_COMPOSTER",
            "FOOD_COMPOSTER_2",
            "FOOD_FABRICATOR",
            "FOOD_FABRICATOR_2",
            "FORTUNE_COOKIE",
            "FREEZER",
            "FREEZER_2",
            "FREEZER_3",
            "GEO_MINER",
            "GILDED_BACKPACK",
            "GILDED_IRON",
            "GILDED_IRON_BOOTS",
            "GILDED_IRON_CHESTPLATE",
            "GILDED_IRON_HELMET",
            "GILDED_IRON_LEGGINGS",
            "GLOWSTONE_BOOTS",
            "GLOWSTONE_CHESTPLATE",
            "GLOWSTONE_HELMET",
            "GLOWSTONE_LEGGINGS",
            "GLOW_BERRY_JUICE",
            "GOLDEN_APPLE_JUICE",
            "GOLD_10K",
            "GOLD_12K",
            "GOLD_12K_BOOTS",
            "GOLD_12K_CHESTPLATE",
            "GOLD_12K_HELMET",
            "GOLD_12K_LEGGINGS",
            "GOLD_14K",
            "GOLD_16K",
            "GOLD_18K",
            "GOLD_20K",
            "GOLD_22K",
            "GOLD_24K",
            "GOLD_24K_BLOCK",
            "GOLD_4K",
            "GOLD_6K",
            "GOLD_8K",
            "GOLD_DUST",
            "GOLD_PAN",
            "GPS_ACTIVATION_DEVICE_PERSONAL",
            "GPS_ACTIVATION_DEVICE_SHARED",
            "GPS_CONTROL_PANEL",
            "GPS_EMERGENCY_TRANSMITTER",
            "GPS_GEO_SCANNER",
            "GPS_MARKER_TOOL",
            "GPS_TELEPORTATION_MATRIX",
            "GPS_TELEPORTER_PYLON",
            "GPS_TRANSMITTER",
            "GPS_TRANSMITTER_2",
            "GPS_TRANSMITTER_3",
            "GPS_TRANSMITTER_4",
            "GRANDMAS_WALKING_STICK",
            "GRANDPAS_WALKING_STICK",
            "GRAPPLING_HOOK",
            "GRIND_STONE",
            "HARDENED_GLASS",
            "HARDENED_METAL_INGOT",
            "HAZMAT_CHESTPLATE",
            "HAZMAT_LEGGINGS",
            "HEATED_PRESSURE_CHAMBER",
            "HEATED_PRESSURE_CHAMBER_2",
            "HEATING_COIL",
            "HEAVY_CREAM",
            "HOLOGRAM_PROJECTOR",
            "HOOK",
            "HUNTER_TALISMAN",
            "ICY_BOW",
            "IGNITION_CHAMBER",
            "INDUSTRIAL_MINER",
            "INFERNAL_BONEMEAL",
            "INFUSED_ELYTRA",
            "INFUSED_HOPPER",
            "INFUSED_MAGNET",
            "IRON_DUST",
            "IRON_GOLEM_ASSEMBLER",
            "JUICER",
            "KELP_COOKIE",
            "KNIGHT_TALISMAN",
            "LARGE_BACKPACK",
            "LARGE_CAPACITOR",
            "LAVA_CRYSTAL",
            "LAVA_GENERATOR",
            "LAVA_GENERATOR_2",
            "LAVA_TALISMAN",
            "LEAD_DUST",
            "LEAD_INGOT",
            "LUMBER_AXE",
            "MAGICAL_BOOK_COVER",
            "MAGICAL_GLASS",
            "MAGICAL_ZOMBIE_PILLS",
            "MAGICIAN_TALISMAN",
            "MAGIC_EYE_OF_ENDER",
            "MAGIC_LUMP_1",
            "MAGIC_LUMP_2",
            "MAGIC_LUMP_3",
            "MAGIC_SUGAR",
            "MAGIC_WORKBENCH",
            "MAGNESIUM_DUST",
            "MAGNESIUM_GENERATOR",
            "MAGNESIUM_INGOT",
            "MAGNESIUM_SALT",
            "MAGNET",
            "MAKESHIFT_SMELTERY",
            "MEDICINE",
            "MEDIUM_BACKPACK",
            "MEDIUM_CAPACITOR",
            "MELON_JUICE",
            "MINER_TALISMAN",
            "MONSTER_JERKY",
            "MULTIMETER",
            "MUTTON_JERKY",
            "NECROTIC_SKULL",
            "NEPTUNIUM",
            "NETHERSTAR_REACTOR",
            "NETHER_GOLD_PAN",
            "NETHER_ICE",
            "NETHER_ICE_COOLANT_CELL",
            "NICKEL_INGOT",
            "NIGHT_VISION_GOGGLES",
            "NUCLEAR_REACTOR",
            "OIL_PUMP",
            "ORE_CRUSHER",
            "ORE_WASHER",
            "ORGANIC_FOOD_APPLE",
            "ORGANIC_FOOD_BEETROOT",
            "ORGANIC_FOOD_CARROT",
            "ORGANIC_FOOD_COCOA",
            "ORGANIC_FOOD_KELP",
            "ORGANIC_FOOD_MELON",
            "ORGANIC_FOOD_POTATO",
            "ORGANIC_FOOD_SEAGRASS",
            "ORGANIC_FOOD_SEEDS",
            "ORGANIC_FOOD_SWEET_BERRIES",
            "ORGANIC_FOOD_WHEAT",
            "OUTPUT_CHEST",
            "PARACHUTE",
            "PICKAXE_OF_CONTAINMENT",
            "PICKAXE_OF_THE_SEEKER",
            "PICKAXE_OF_VEIN_MINING",
            "PLASTIC_SHEET",
            "PLUTONIUM",
            "PORK_JERKY",
            "PORTABLE_CRAFTER",
            "PORTABLE_DUSTBIN",
            "PORTABLE_GEO_SCANNER",
            "PORTABLE_TELEPORTER",
            "POWER_CRYSTAL",
            "PRESSURE_CHAMBER",
            "PRODUCE_COLLECTOR",
            "PROGRAMMABLE_ANDROID",
            "PROGRAMMABLE_ANDROID_2",
            "PROGRAMMABLE_ANDROID_2_BUTCHER",
            "PROGRAMMABLE_ANDROID_2_FARMER",
            "PROGRAMMABLE_ANDROID_2_FISHERMAN",
            "PROGRAMMABLE_ANDROID_3",
            "PROGRAMMABLE_ANDROID_3_BUTCHER",
            "PROGRAMMABLE_ANDROID_3_FISHERMAN",
            "PROGRAMMABLE_ANDROID_BUTCHER",
            "PROGRAMMABLE_ANDROID_FARMER",
            "PROGRAMMABLE_ANDROID_FISHERMAN",
            "PROGRAMMABLE_ANDROID_MINER",
            "PROGRAMMABLE_ANDROID_WOODCUTTER",
            "PULVERIZED_ORE",
            "PUMPKIN_JUICE",
            "PURE_ORE_CLUSTER",
            "RABBIT_JERKY",
            "RADIANT_BACKPACK",
            "RAG",
            "RAINBOW_BOOTS",
            "RAINBOW_CHESTPLATE",
            "RAINBOW_CLAY",
            "RAINBOW_CLAY_HALLOWEEN",
            "RAINBOW_CLAY_VALENTINE",
            "RAINBOW_CLAY_XMAS",
            "RAINBOW_CONCRETE",
            "RAINBOW_CONCRETE_HALLOWEEN",
            "RAINBOW_CONCRETE_VALENTINE",
            "RAINBOW_CONCRETE_XMAS",
            "RAINBOW_GLASS",
            "RAINBOW_GLASS_HALLOWEEN",
            "RAINBOW_GLASS_PANE",
            "RAINBOW_GLASS_PANE_HALLOWEEN",
            "RAINBOW_GLASS_PANE_VALENTINE",
            "RAINBOW_GLASS_PANE_XMAS",
            "RAINBOW_GLASS_VALENTINE",
            "RAINBOW_GLASS_XMAS",
            "RAINBOW_GLAZED_TERRACOTTA",
            "RAINBOW_GLAZED_TERRACOTTA_HALLOWEEN",
            "RAINBOW_GLAZED_TERRACOTTA_VALENTINE",
            "RAINBOW_GLAZED_TERRACOTTA_XMAS",
            "RAINBOW_HELMET",
            "RAINBOW_LEATHER",
            "RAINBOW_LEGGINGS",
            "RAINBOW_WOOL",
            "RAINBOW_WOOL_HALLOWEEN",
            "RAINBOW_WOOL_VALENTINE",
            "RAINBOW_WOOL_XMAS",
            "RAW_CARBONADO",
            "REACTOR_ACCESS_PORT",
            "REACTOR_COLLANT_CELL",
            "REDSTONE_ALLOY",
            "REFINERY",
            "REINFORCED_ALLOY_BOOTS",
            "REINFORCED_ALLOY_CHESTPLATE",
            "REINFORCED_ALLOY_HELMET",
            "REINFORCED_ALLOY_INGOT",
            "REINFORCED_ALLOY_JETBOOTS",
            "REINFORCED_ALLOY_JETPACK",
            "REINFORCED_ALLOY_LEGGINGS",
            "REINFORCED_ALLOY_MULTI_TOOL",
            "REINFORCED_CLOTH",
            "REINFORCED_FURNACE",
            "REINFORCED_PLATE",
            "REINFORCED_SPAWNER",
            "RESTORED_BACKPACK",
            "RUBBER_BOOTS",
            "SALT",
            "SCROLL_OF_DIMENSIONAL_TELEPOSITION",
            "SCUBA_HELMET",
            "SEISMIC_AXE",
            "SIFTED_ORE",
            "SILICON",
            "SILVER_DUST",
            "SILVER_INGOT",
            "SLIME_BOOTS",
            "SLIME_CHESTPLATE",
            "SLIME_HELMET",
            "SLIME_LEGGINGS",
            "SLIME_STEEL_BOOTS",
            "SLIME_STEEL_CHESTPLATE",
            "SLIME_STEEL_HELMET",
            "SLIME_STEEL_LEGGINGS",
            "SMALL_BACKPACK",
            "SMALL_CAPACITOR",
            "SMALL_URANIUM",
            "SMELTERS_PICKAXE",
            "SMELTERY",
            "SOLAR_GENERATOR",
            "SOLAR_GENERATOR_2",
            "SOLAR_GENERATOR_3",
            "SOLAR_GENERATOR_4",
            "SOLAR_HELMET",
            "SOLAR_PANEL",
            "SOLDER_INGOT",
            "SOLDER_JETBOOTS",
            "SOLDER_JETPACK",
            "SOLDER_MULTI_TOOL",
            "SOULBOUND_AXE",
            "SOULBOUND_BOOTS",
            "SOULBOUND_BOW",
            "SOULBOUND_CHESTPLATE",
            "SOULBOUND_ELYTRA",
            "SOULBOUND_HELMET",
            "SOULBOUND_HOE",
            "SOULBOUND_LEGGINGS",
            "SOULBOUND_PICKAXE",
            "SOULBOUND_SHOVEL",
            "SOULBOUND_SWORD",
            "SOULBOUND_TRIDENT",
            "SPLINT",
            "STAFF_ELEMENTAL",
            "STAFF_ELEMENTAL_FIRE",
            "STAFF_ELEMENTAL_STORM",
            "STAFF_ELEMENTAL_WATER",
            "STAFF_ELEMENTAL_WIND",
            "STEEL_INGOT",
            "STEEL_JETBOOTS",
            "STEEL_JETPACK",
            "STEEL_MULTI_TOOL",
            "STEEL_PLATE",
            "STEEL_THRUSTER",
            "STONE_CHUNK",
            "STRANGE_NETHER_GOO",
            "SULFATE",
            "SWEET_BERRY_JUICE",
            "SWORD_OF_BEHEADING",
            "SYNTHETIC_DIAMOND",
            "SYNTHETIC_EMERALD",
            "SYNTHETIC_SAPPHIRE",
            "SYNTHETIC_SHULKER_SHELL",
            "TABLE_SAW",
            "TAPE_MEASURE",
            "TINY_URANIUM",
            "TIN_DUST",
            "TIN_INGOT",
            "TOME_OF_KNOWLEDGE_SHARING",
            "TOTEM_OF_UNDYING",
            "TRASH_CAN_BLOCK",
            "TRAVELLER_TALISMAN",
            "TREE_GROWTH_ACCELERATOR",
            "TRIDENT",
            "URANIUM",
            "VANILLA_AUTO_CRAFTER",
            "VITAMINS",
            "WARRIOR_TALISMAN",
            "WATER_TALISMAN",
            "WHEAT_FLOUR",
            "WHIRLWIND_TALISMAN",
            "WISE_TALISMAN",
            "WITHER_ASSEMBLER",
            "WITHER_PROOF_GLASS",
            "WITHER_PROOF_OBSIDIAN",
            "WIZARD_TALISMAN",
            "WOVEN_BACKPACK",
            "XP_COLLECTOR",
            "ZINC_DUST",
            "ZINC_INGOT",
        ];

function onPlayerFish(event) {

    let ifDone = allSlimefunItemFish(event);
    if(ifDone)return;

    var caught = event.getCaught();
    var player = event.getPlayer();
    var hook = event.getHook();
    var State = event.getState()


    //获取双手itemstack
    var itemInOffHand = player.getInventory().getItem(17);;
    var itemInMainHand = player.getInventory().getItemInMainHand();
    var sfItem_Main = getSfItemByItem(itemInMainHand);
    var sfItem_Off = getSfItemByItem(itemInOffHand);


    // org.bukkit.Bukkit.broadcastMessage("caught:"+ caught);
    // org.bukkit.Bukkit.broadcastMessage("State:"+ State);

    if (caught !== null && sfItem_Main !== null && sfItem_Off !== null){

        var sfItem_Main_id = sfItem_Main.getId();
        var sfItem_Off_id = sfItem_Off.getId(); 
    
    if (State == "CAUGHT_FISH" && sfItem_Main_id == "MAGIC_ROD_ZMZ_WWS" && sfItem_Off_id == "MAGIC_ROD_ZMZ_WWS_YE_HSJ"){
           
        // //取消事件防止默认行为
        // event.setCancelled(true);
        //删除被捕获的实体
        let amount = 1;
        decreaseItemInWhichHand(itemInOffHand, amount);
        caught.setPickupDelay(20);
        caught.remove();
        



        const selectedItem = SlimefunOrigin[Math.floor(Math.random() * SlimefunOrigin.length)];

        // org.bukkit.Bukkit.broadcastMessage("selectedItem:"+ selectedItem);

        const slimefunItem = getSfItemById(selectedItem);

        if (slimefunItem == null) {
            // org.bukkit.Bukkit.broadcastMessage("未找到对应的 SlimefunItem");
            return ;
        }
        
        const itemstack = new org.bukkit.inventory.ItemStack(slimefunItem.getItem());
        itemstack.setAmount(1);

        try {
        // 转换为 CraftItemStack
        const CraftItemStack = Java.type('org.bukkit.craftbukkit.inventory.CraftItemStack');
        const craftStack = CraftItemStack.asCraftCopy(itemstack);

        var itemEntity = hook.getWorld().dropItem(hook.getLocation(), craftStack);
        }catch (e){
            // 回退到 itemstack 原始方式
            var itemEntity = hook.getWorld().dropItem(hook.getLocation(), itemstack);
        }
    
        
        // 设置物品不会被立即捡起（10 ticks = 0.5秒）
        itemEntity.setPickupDelay(2);
        
        // 将物品拉向玩家（可选增强效果）
        var playerLocation = player.getLocation().add(0, 1, 0);
        var itemLocation = itemEntity.getLocation();
        var direction = playerLocation.subtract(itemLocation.toVector()).toVector();
        itemEntity.setVelocity(direction.normalize().multiply(1.7));

        sendMessage(player, "§b恭喜你钓到了 " + itemstack.getItemMeta().getDisplayName() + " §b*1");
        
        //发送音效反馈
        player.playSound(player.getLocation(), "entity.experience_orb.pickup", 1.0, 1.0);
            return;
        }
    }



}

const isMC1_21Plus = () => {
    const ver = org.bukkit.Bukkit.getVersion();
    const m = ver.match(/\(MC:\s*(\d+)\.(\d+)/);
    return m ? (parseInt(m[1]) === 1 ? parseInt(m[2]) >= 21 : parseInt(m[1]) > 1) : false;
};


function getDisplayNameMag(item) {
    return ("" + (item?.getItemMeta()?.getDisplayName() || item?.getType().name())).replace(/§[a-zA-Z0-9]|\\u00a7[a-zA-Z0-9]/g, "").trim();
}


const allSlimefunItemFish = (e) => {

    var caught = e.getCaught();
    var player = e.getPlayer();
    var hook = e.getHook();
    var State = e.getState()

    const itemList = Slimefun.getRegistry().getAllSlimefunItems().toArray().map(item => item.getId());;

    var itemInMainHand = player.getInventory().getItemInMainHand();
    var sfItem_Main_Id = getSfItemByItem(itemInMainHand).getId();
    if(sfItem_Main_Id != "MAGIC_ROD_ZMZ_WWS"){
        return false;
    }

    // 检查背包中是否有指定粘液物品，并记录位置以便后续移除
    var targetItemId = "MAGIC_ROD_ZMZ_WWS_YE_YWD";
    var foundSlot = -1;
    var inventory = player.getInventory();
    var contents = inventory.getContents(); // 获取背包所有物品

    for (var i = 0; i < contents.length; i++) {
        var item = contents[i];
        if (item !== null) {
            var sfItem = getSfItemByItem(item);
            if (sfItem !== null && sfItem.getId() === targetItemId) {
                foundSlot = i;
                break; // 找到第一个就停止
            }
        }
    }

    if (State == "CAUGHT_FISH" && foundSlot >= 0) {
        var itemInSlot = inventory.getItem(foundSlot);
        if (itemInSlot.getAmount() > 1) {
            itemInSlot.setAmount(itemInSlot.getAmount() - 1);
        } else {
            inventory.clear(foundSlot); 
        }
        caught.setPickupDelay(20);
        caught.remove();
        const randomChance = Math.floor(Math.random() * 100) + 1;
        let selectedItem;
        // 钓鱼逻辑
        if (randomChance <= 10) {
            selectedItem = itemList[Math.floor(Math.random() * itemList.length)];
        } else {
            selectedItem = SlimefunOrigin[Math.floor(Math.random() * SlimefunOrigin.length)];
        }

        var slimefunItem = getSfItemById(selectedItem);

        if (slimefunItem == null) {
            return false;
        }

        //特殊处理
        var itemstack1 = new org.bukkit.inventory.ItemStack(slimefunItem.getItem());
        const sfItemName = getDisplayNameMag(itemstack1).toLowerCase();
        const keywords = ["伪物", "矩阵", "创造者", "创世","腐竹","不可控空生成器","50重压缩原石生成器","过载加速器","刷怪笼","压缩基岩","贪婪矩阵-III","至尊","熵","壳","螺旋体","奇点","终焉","魔法糖"];

        const hasKeyword = keywords.some(word => sfItemName.includes(word.toLowerCase()));

        if (hasKeyword) {
            var ifUltra = 1;
        }

        if (ifUltra==1){
            const randomChance2 = Math.floor(Math.random() * 100) + 1;
            if (randomChance2 <= 97){
            slimefunItem = getSfItemById("MAGIC_ROD_ZMZ_WWS_YE_YWD");
            }
        }

        const itemstackOrigin = new org.bukkit.inventory.ItemStack(getSfItemById(selectedItem).getItem());
        
        var itemstack = new org.bukkit.inventory.ItemStack(slimefunItem.getItem());
        itemstack.setAmount(1);


        try {
        // 转换为 CraftItemStack
        const CraftItemStack = Java.type('org.bukkit.craftbukkit.inventory.CraftItemStack');
        const craftStack = CraftItemStack.asCraftCopy(itemstack);

        var itemEntity = hook.getWorld().dropItem(hook.getLocation(), craftStack);
        }catch (e){
            // 回退到 itemstack 原始方式
            var itemEntity = hook.getWorld().dropItem(hook.getLocation(), itemstack);
        }

        if (hasKeyword) {
            player.sendMessage("§e鱼饵幻化为了 "+ itemstackOrigin.getItemMeta().getDisplayName());
            player.sendMessage("§b你钓到了不该钓的东西，鱼饵变回了原来的样子");
        }

        // 设置物品不会被立即捡起（10 ticks = 0.5秒）
        itemEntity.setPickupDelay(2);
        
        // 将物品拉向玩家（可选增强效果）
        var playerLocation = player.getLocation().add(0, 1, 0);
        var itemLocation = itemEntity.getLocation();
        var direction = playerLocation.subtract(itemLocation.toVector()).toVector();
        itemEntity.setVelocity(direction.normalize().multiply(1.7));

        sendMessage(player, "§b恭喜你钓到了 " + itemstack.getItemMeta().getDisplayName() + " §b*1");

        player.playSound(player.getLocation(), "entity.experience_orb.pickup", 2.0, 2.0);
        return true;

    }
    return false;













}




function onBlockPlace(event) {

    let config = getAddonConfig();
    let magicStoreIf = config.getBoolean("options.magic.storage", true);
    if(!magicStoreIf){
        return;
    }

    let item = event.getItemInHand();
    let can = event.canBuild();
    let sfitem = getSfItemByItem(item);
    let type = item.getType();
    // org.bukkit.Bukkit.broadcastMessage("item:"+ item);
    // org.bukkit.Bukkit.broadcastMessage("can:"+ can);
    // org.bukkit.Bukkit.broadcastMessage("sfitem:"+ sfitem);
    // org.bukkit.Bukkit.broadcastMessage("type:"+ type);
    const CARGO_STORAGE_UNITS = [
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_1",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_2",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_3",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_4",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_5",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_6",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_7",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_8",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_9",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_10",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_11",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_12",
        "NTW_EXPANSION_CARGO_STORAGE_UNIT_13"
        ];


    if (sfitem != null) {
        // org.bukkit.Bukkit.broadcastMessage("对应的 SlimefunItem ID: " + slimefunItem.getId());
        
    } else {
        // org.bukkit.Bukkit.broadcastMessage("未找到对应的 SlimefunItem");
        return ;
    }

        
    if (sfitem != null && type == "CHISELED_BOOKSHELF" && CARGO_STORAGE_UNITS.some(unit => unit === sfitem.getId())){
        // org.bukkit.Bukkit.broadcastMessage("无权限放置");
        event.setCancelled(true);
    }

        // org.bukkit.Bukkit.broadcastMessage("放置成功");



}


function onPlayerPickupItem(event){

    let config = getAddonConfig();
    let magicStoreIf = config.getBoolean("options.magic.storage", true);
    if(!magicStoreIf){
        return;
    }


    // 定义需要检查的 Slimefun 物品 ID 范围
    const CARGO_STORAGE_UNITS = [
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_1",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_2",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_3",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_4",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_5",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_6",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_7",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_8",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_9",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_10",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_11",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_12",
    "NTW_EXPANSION_CARGO_STORAGE_UNIT_13"
    ];
    let item = event.getItem();

    let player = event.getPlayer();

    let world = player.getWorld();

    let eyeLocation = player.getEyeLocation();

    var itemstack = item.getItemStack();

    // 尝试获取与 ItemStack 关联的 SlimefunItem
    let slimefunItem = getSfItemByItem(itemstack);

    let type = itemstack.getType();

    // org.bukkit.Bukkit.broadcastMessage("type:"+ type);


    // org.bukkit.Bukkit.broadcastMessage("物品:"+ sfid);

    
    // 打印调试信息
    // org.bukkit.Bukkit.broadcastMessage("拾起的物品类型: " + item.getType());
    if (slimefunItem != null) {
        // org.bukkit.Bukkit.broadcastMessage("对应的 SlimefunItem ID: " + slimefunItem.getId());
        
    } else {
        // org.bukkit.Bukkit.broadcastMessage("未找到对应的 SlimefunItem");
        return ;
    }

    // 检查是否存在关联的 SlimefunItem 并且是否在指定范围内
    if (slimefunItem != null && type == "CHISELED_BOOKSHELF" && CARGO_STORAGE_UNITS.some(unit => unit === slimefunItem.getId())) {
        // 取消物品拾取事件
        // event.setCancelled(true);
        let meta = itemstack.getItemMeta();
            if (meta != null) {
                let lore = meta.getLore();

                // 保留前6行 Lore
                
                // 保留第1到第6行和第8到第10行 Lore
                let preservedLore = [...lore.slice(0, 6), ...lore.slice(7, 10)];

                // 添加新的 Lore 行
                let newLoreLine = "§c§l樱§e§l缘§d§l梦§c§l之§b§l乡§a§l粘§b§l液§c§l科§d§l技§e§l服§f§l务§5§l器§6§l定§7§l制"; // 彩色字体

                // 合并旧的 Lore 和新的 Lore 行
                let updatedLore = [...preservedLore, newLoreLine];
                meta.setLore(updatedLore);

                meta.setDisplayName("§a失§b去§c魔§d法§e的§f抽§3屉§4（§1网§2络§5抽§6屉§7）[如果还是模型形态则可以继续使用]"); // 使用颜色代码 §a 表示绿色
                itemstack.setItemMeta(meta);
                // 修改物品材质为石头
                // itemstack.setType(org.bukkit.Material.STONE);
                // 更新物品实体以反映新的 displayName
                item.setItemStack(itemstack);
            }

        // 移除物品实体
        // item.remove();
        playIgniteTNTSound(world, eyeLocation);
        

        // 广播调试信息（可选）
        org.bukkit.Bukkit.broadcastMessage("§b玩家"+player.getName()+"§3的§a魔§b法§c抽§d屉§5被§e封§f印§6了§4=====");
    }


}


//减少物品
function decreaseItemInWhichHand(itemInWitch, amount){

    itemInWitch.setAmount(itemInWitch.getAmount() - amount);

}


//闪电
function playIgniteTNTSound(world, location) {
    const TNT_IGNITE_SOUND_NAME = "item.totem.use"; // 使用完整的命名空间字符串
    const VOLUME = 1.0; // 音量
    const PITCH = 0.01; // 音调

    // 播放点燃TNT的音效，使用声音名称字符串
    world.playSound(location, TNT_IGNITE_SOUND_NAME, VOLUME, PITCH);
}